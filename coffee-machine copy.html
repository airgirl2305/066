
      body {
        font-family: "Comfortaa", sans-serif;
        background-image: url(img/coffee-wallpaper.jpg);
        background-position: center;
        background-position: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
      }

      .coffee_block span {
        font-size: 1.5rem;
        line-height: 100px;
        vertical-align: middle;
        color: white;
        padding-left: 1rem;
      }
      .money-container {
        row-gap: 10px;
      }

      img[src$="rub.jpg"]:hover {
        filter: contrast(150%);
        cursor: pointer;
      }
      .animated {
        animation-name: hide-bill;
        animation-duration: 0.2s;
        animation-timing-function: ease-out;
      }
      @keyframes hide-bill {
        0% {
          opacity: 1;
          transform: rotate(-90deg) rotateY(20deg);
        }
        50% {
          transform: rotate(-90deg) rotateY(60deg);
        }
        100% {
          opacity: 0;
          transform: rotate(-90deg) rotateY(85deg);
        }
      }
      .progress {
        height: 1.4rem;
        border-radius: 0.2rem;
      }
      .progress-bar {
        background-color: hsl(39, 92%, 57%);
      }
      .fa-regular,
      .fa-solid {
        font-size: 1.5rem;
        color: hsl(39, 92%, 50%);
      }
      #displayInfo {
        padding-top: 6px;
        padding-bottom: 6px;
      }
      #changeBox {
        width: 100%;
        height: 200px;
        position: relative;
        margin-top: 1rem;
        background-color: hsl(201.03, 47.87%, 67.72%, 0.5);
        border: 2px solid black;
        border-radius: 4px;
      }
      .get-change {
        background-color: hsl(39, 92%, 45%);
        border: 0;
        margin-top: 1rem;
        color: white;
      }
      .get-change:hover {
        background-color: hsl(39, 92%, 35%);
        color: wheat;
      }
      img[src$="rub.png"] {
        width: 60px;
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <div class="row">

        <div class="col-md-6">
          <div class="row">
            <div class="col-md-6">
              <div id="display">
                <p id="displayInfo"><i class="fa-solid fa-mug-saucer"></i> &nbsp; Внесите деньги</p>
                <p id="balance"><i class="fa-solid fa-piggy-bank"></i> &nbsp; Баланс: 0 руб.</p>
                <div class="progress" hidden>
                  <div class="progress-bar"></div>
                </div>
              </div>
              <button class="btn btn-lg btn-block get-change" onclick="getChange(money.value)">
                Забрать сдачу -->
              </button>
            </div>
            <div class="col-md-6">
              <input type="hidden" id="money" />
              <img src="img/bill_acc.png" alt="" />
              <div id="changeBox"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex flex-wrap justify-content-around money-container">
        <img src="img/50rub.jpg" alt="" id="test" data-bill-value="50" />
        <img src="img/100rub.jpg" alt="" data-bill-value="100" />
        <img src="img/200rub.jpg" alt="" data-bill-value="200" />
        <img src="img/500rub.jpg" alt="" data-bill-value="500" />
      </div>
    </div>

    <script>
      let money = document.getElementById("money");
      let display = document.getElementById("displayInfo");
      let bills = document.querySelectorAll("img[src$='rub.jpg']");
      let bill_acc = document.querySelector("img[src$='acc.png']");
      let balance = document.getElementById("balance");
      let changeBox = document.getElementById("changeBox");

      for (let bill of bills) {
        bill.onmousedown = function (e) {
          bill = e.currentTarget;
          bill.style.position = "absolute";
          bill.style.zIndex = 1000;
          bill.style.transform = "rotate(90deg)";

          document.addEventListener("mousemove", moveBill);

          bill.onmouseup = function () {
            document.removeEventListener("mousemove", moveBill);
            bill.style.zIndex = 1;

            let bill_top = bill.getBoundingClientRect().top;
            let bill_left = bill.getBoundingClientRect().left;
            let bill_right = bill.getBoundingClientRect().right;

            let bill_acc_top = bill_acc.getBoundingClientRect().top;
            let bill_acc_left = bill_acc.getBoundingClientRect().left;
            let bill_acc_right = bill_acc.getBoundingClientRect().right;
            let bill_acc_bottom =
              bill_acc.getBoundingClientRect().bottom -
              (bill_acc.getBoundingClientRect().height / 3) * 2;

            if (
              bill_top > bill_acc_top &&
              bill_left > bill_acc_left &&
              bill_right < bill_acc_right &&
              bill_top < bill_acc_bottom
            ) {
              bill.classList.add("animated");
              setTimeout(function () {
                bill.hidden = true;
              }, 190);
              money.value = +money.value + +bill.dataset.billValue;
              balance.innerHTML = `<i class="fa-solid fa-piggy-bank"></i> &nbsp; Баланс: ${money.value} руб.`;
            }
          };

          function moveBill(event) {
            let x = event.clientX - 150;
            let y = event.clientY - 65;
            bill.style.top = y + "px";
            bill.style.left = x + "px";
          }
        };

        bill.ondragstart = function () {
          return false;
        };
      }

      function startProgressBar(drinkName) {
        let i = 0;
        let progressBar = document.querySelector(".progress-bar");
        progressBar.parentElement.hidden = false;

        function progress() {
          i++;
          progressBar.style.width = i + "%";
          progressBar.innerText = i + "%";

          if (i == 100) {
            clearInterval(timerId);
            progressBar.style.width = 0 + "%";
            progressBar.parentElement.hidden = true;
            display.innerHTML = `<i class="fa-regular fa-face-smile fa-fade"></i> &nbsp; Ваш  ${drinkName} готов!`;
          } else if (i == 5) {
            display.innerHTML = `<i class="fa-regular fa-clock fa-shake"></i> &nbsp; Приготовление ${drinkName} началось`;
          } else if (i == 80) {
            display.innerHTML = `<i class="fa-regular fa-clock fa-shake"></i> &nbsp; ${drinkName} почти готов`;
          }
        }
        let timerId = setInterval(progress, 100);
      }

      function getCoffee(price, name) {
        if (money.value >= price) {
          money.value = money.value - price;
          balance.innerHTML = `<i class="fa-solid fa-piggy-bank"></i> &nbsp; Баланс: ${money.value} руб.`;
          startProgressBar(name);
        } else {
          display.innerHTML = `<i class="fa-regular fa-face-sad-tear"></i> &nbsp; Не хватает средств на ${name}`;
        }
      }

      function getChange(num) {
        let coin;
        let top = getRandom(0, changeBox.getBoundingClientRect().height - 65);
        let left = getRandom(0, changeBox.getBoundingClientRect().width - 65);

        if (num >= 10) coin = 10;
        else if (num >= 5) coin = 5;
        else if (num >= 2) coin = 2;
        else if (num >= 1) coin = 1;
        else {
          let sound = new Audio("img/change.mp3");
          sound.play();
        }
        console.log(coin);
        changeBox.innerHTML += `<img src="img/${coin}rub.png" style="top: ${top}px; left: ${left}px">`;

        if (num - coin != 0) getChange(num - coin);
      }

      function getRandom(min, max) {
        return Math.random() * (max - min) + min;
      }

      function ternGetChange(num) {
        let coin = num >= 10 ? 10 : num >= 5 ? 5 : num >= 2 ? 2 : num >= 1 ? 1 : "Вся сдача выдана";
        console.log(coin);
        if (num - coin != 0) ternGetChange(num - coin);
      }

      function oldGetChange(num) {
        if (num >= 10) {
          console.log(10);
          getChange(num - 10);
        } else if (num >= 5) {
          console.log(5);
          getChange(num - 5);
        } else if (num >= 2) {
          console.log(2);
          getChange(num - 2);
        } else if (num >= 1) {
          console.log(1);
          getChange(num - 1);
        }
      }

      // bills.forEach(function (bill) {
      //   bill.onmousedown = function () {
      //     console.log("Произошло событие mousedown");
      //   };
      // });
      // for (let i = 0; i < bills.length; i++) {
      //   bills[i].onmousedown = function () {
      //     console.log("Произошло событие mousedown");
      //   }
      // }
    </script>

